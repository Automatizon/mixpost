import{r as k,k as C,l as N,c as x,a as s,u as a,b as p,w as t,F as b,o as m,Z as A,f as F,h as _,e as i,t as E,L as S,x as D,P as j,v as z,g as O,d as Z}from"./app-nSd2RBci.js";import{u as q}from"./SearchInput-7wK-rdam.js";import{u as G,_ as H,a as J,b as Q}from"./MediaGifs-F71AYX68.js";import{_ as R}from"./PageHeader-Cc53z747.js";import{T as U,_ as W}from"./Tab-nWrW6tLO.js";import{_ as X,a as Y}from"./PureDangerButton-CsFzBPPZ.js";import{_ as K}from"./DangerButton-CgFDuR05.js";import{_ as h}from"./Panel-DYltsGxj.js";import{_ as ee,T as se}from"./Trash-D-UP0KKJ.js";import"./Input-DhCXwjH_.js";import"./MediaFile-BiZDBSSB.js";import"./ExclamationCircle-DnlCZmOP.js";import"./helpers-CxBfsE5s.js";import"./NoResult-JtNMXJRp.js";import"./Alert-CoNayqvC.js";import"./useNotifications-DgXmvl7e.js";const te={class:"w-full mx-auto row-py"},oe={class:"w-full row-px"},ae={class:"w-full row-px mt-lg"},be={__name:"Media",setup(le){const{activeTab:r,tabs:y,isDownloading:v,isDeleting:w,downloadExternal:L,deletePermanently:P}=G(),T={uploads:H,stock:J,gifs:Q},n=k(),V=C(()=>T[r.value]),c=C(()=>n.value?n.value.selected:[]),$=()=>{n.value.deselectAll()},B=()=>{const o=r.value!=="uploads";o&&L(c.value.map(e=>{const{id:f,url:l,download_data:d}=e;return{id:f,url:l,download_data:d}}),e=>{g(e.data)}),o||g(c.value)},{versionContentObject:I}=q(),g=o=>{Z.post(route("mixpost.posts.store"),{versions:[{account_id:0,is_original:!0,content:[I("",o.map(e=>e.id))]}]})},u=k(!1),M=()=>{const o=c.value.map(e=>e.id);P(o,()=>{$(),n.value.removeItems(o),u.value=!1})};return(o,e)=>{const f=N("tooltip");return m(),x(b,null,[s(a(A),{title:"Media Library"}),p("div",te,[s(R,{title:"Media Library"}),p("div",oe,[s(U,null,{default:t(()=>[(m(!0),x(b,null,F(a(y),(l,d)=>(m(),_(W,{key:d,onClick:ie=>r.value=d,active:a(r)===d},{default:t(()=>[i(E(l),1)]),_:2},1032,["onClick","active"]))),128))]),_:1})]),p("div",ae,[s(h,null,{default:t(()=>[(m(),_(S(V.value),{ref_key:"sourceProperties",ref:n,columns:4},null,512)),s(X,{count:c.value.length,onClose:e[1]||(e[1]=l=>$())},{default:t(()=>[s(D,{onClick:B,isLoading:a(v),disabled:a(v),class:"mr-sm",size:"xs"},{default:t(()=>[s(j,{class:"mr-xs"}),e[4]||(e[4]=i(" Create Post "))]),_:1},8,["isLoading","disabled"]),a(r)==="uploads"?z((m(),_(Y,{key:0,onClick:e[0]||(e[0]=l=>u.value=!0)},{default:t(()=>[s(se)]),_:1})),[[f,"Delete"]]):O("",!0)]),_:1},8,["count"])]),_:1})])]),s(ee,{show:u.value,variant:"danger",onClose:e[3]||(e[3]=l=>u.value=!1)},{header:t(()=>e[5]||(e[5]=[i(" Delete media ")])),body:t(()=>e[6]||(e[6]=[i(" Are you sure you want to delete selected media items? ")])),footer:t(()=>[s(D,{onClick:e[2]||(e[2]=l=>u.value=!1),class:"mr-xs"},{default:t(()=>e[7]||(e[7]=[i("Cancel")])),_:1}),s(K,{isLoading:a(w),disabled:a(w),onClick:M},{default:t(()=>e[8]||(e[8]=[i("Delete")])),_:1},8,["isLoading","disabled"])]),_:1},8,["show"])],64)}}};export{be as default};
